(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{1171:function(t,e,n){"use strict";n.r(e);var a=n(2112),o=n(1748);for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);n(2499);var r=n(0),i=n(2497),l=n.n(i),c=Object(r.a)(o.default,a.a,a.b,!1,null,null,null);"function"==typeof l.a&&l()(c),e.default=c.exports},1746:function(t,e,n){var a=n(2498);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("9745f4a6",a,!0,{})},1747:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(n(16)),o=u(n(8)),s=u(n(7)),r=u(n(3)),i=n(13),l=n(27),c=n(20);function u(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)({},(0,i.preload)("GET_SYSTEM_BACKUP_OPTIONS"),{mixins:[(0,l.$bindTab)({defaultTab:"basic",param:"tab"})],data:function(){return{backupPath:"",minDisk:"",mountPoint:"",backup:[],homeDirs:!1,remoteTransfer:!1,remoteTransferData:{method:"ftp",deleteAfter:!1,incremental:!1,host:"",user:"",password:"",path:""},cronData:{use_cron:!1,minute:"",hour:"",dayofmonth:"",month:"",dayofweek:""},file:"",directory:"",checkedDirs:[],checkedFiles:[]}},computed:(0,r.default)({},(0,c.mapState)({options:function(t){return t.api.GET_SYSTEM_BACKUP_OPTIONS.response}}),{requestData:function(){return{BACKUP_PATH:this.backupPath,MIN_DISK:this.minDisk,MOUNT_POINT:this.mountPoint,ADD_USERS_TO_LIST:!0,HTTP_BK:this.backup.includes("httpd"),BIND_BK:this.backup.includes("dns"),MYSQL_BK:this.backup.includes("mysql"),CUSTOM_BK:this.backup.includes("custom"),USE_RTRANS:this.remoteTransfer,RTRANS_METHOD:this.remoteTransferData.method,DEL_AFTERTRANS:this.remoteTransferData.deleteAfter,FBF_RTRANS:this.remoteTransferData.incremental,FTP_HOST:this.$p6e.toA(this.remoteTransferData.host),FTP_USER:this.remoteTransferData.user,FTP_PASS:this.remoteTransferData.password,FTP_RPATH:this.remoteTransferData.path}}}),methods:{systemBackup:function(){this.$actionRequest("RUN_SYSTEM_BACKUP")},reloadOptions:function(){this.$request("GET_SYSTEM_BACKUP_OPTIONS"),this.checkedDirs=[],this.checkedFiles=[]},deleteDirs:function(){var t=this;return(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("SYSTEM_BACKUP_DELETE_DIRS",{select:t.checkedDirs.map(function(t){return t.directory})});case 2:e.sent&&t.reloadOptions();case 4:case"end":return e.stop()}},e,t)}))()},deleteFiles:function(){var t=this;return(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("SYSTEM_BACKUP_DELETE_FILES",{select:t.checkedFiles.map(function(t){return t.file})});case 2:e.sent&&t.reloadOptions();case 4:case"end":return e.stop()}},e,t)}))()},addDir:function(){var t=this;return(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("SYSTEM_BACKUP_ADD_DIR",t.$get(["directory"]));case 2:e.sent&&t.reloadOptions();case 4:case"end":return e.stop()}},e,t)}))()},addFile:function(){var t=this;return(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("SYSTEM_BACKUP_ADD_FILE",t.$get(["file"]));case 2:e.sent&&t.reloadOptions();case 4:case"end":return e.stop()}},e,t)}))()},saveOptions:function(){this.$actionRequest("SAVE_SYSTEM_BACKUP_OPTIONS",this.requestData)},saveCron:function(){this.$actionRequest("SAVE_SYSTEM_BACKUP_CRON_OPTIONS",this.cronData)}},created:function(){this.backupPath=this.options.backupPath,this.minDisk=this.options.minDisk,this.mountPoint=this.options.mountPoint,this.backup=this.options.backup,this.remoteTransfer=this.options.remoteTransfer,(0,a.default)(this.remoteTransferData,this.options.remoteTransferData),this.remoteTransferData.host=this.$p6e.toU(this.options.remoteTransferData.host),(0,a.default)(this.cronData,this.options.cronData)}})},1748:function(t,e,n){"use strict";n.r(e);var a=n(1747),o=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e.default=o.a},2112:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{id:"system-backup"}},[n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:t.systemBackup},slot:"header:buttons"},[n("translate",[t._v("Run System Backup right now")])],1),t._v(" "),n("app-page-section",[n("ui-tabs",{attrs:{tabs:[{id:"basic",label:t.$gettext("Basic Configuration"),desc:t.$gettext("Configure full system Backup")},{id:"remote",label:t.$gettext("Remote Transfer"),desc:t.$gettext("Configure Remote Transfer option")},{id:"directories",label:t.$gettext("Directories"),desc:t.$gettext("Choose directories to backup")},{id:"files",label:t.$gettext("Files"),desc:t.$gettext("Choose files to backup")}],selected:t.tab},on:{"update:selected":function(e){t.tab=e}}},[n("div",{attrs:{slot:"tab:basic"},slot:"tab:basic"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Backup Path")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex"}],attrs:{slot:"content"},slot:"content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.backupPath,expression:"backupPath"}],attrs:{type:"text"},domProps:{value:t.backupPath},on:{input:function(e){e.target.composing||(t.backupPath=e.target.value)}}})])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Minumum disk space required for backup (MB)")]),t._v(" "),n("template",{slot:"content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.minDisk,expression:"minDisk"}],attrs:{type:"text"},domProps:{value:t.minDisk},on:{input:function(e){e.target.composing||(t.minDisk=e.target.value)}}}),t._v(" "),n("translate",[t._v("on partition")]),t._v(" "),n("input-usual-select",{attrs:{options:t.options.selects.mountPoint},model:{value:t.mountPoint,callback:function(e){t.mountPoint=e},expression:"mountPoint"}})],1)],2),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Backup")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[n("input-checkbox",{attrs:{value:"httpd"},model:{value:t.backup,callback:function(e){t.backup=e},expression:"backup"}},[n("translate",[t._v("\n                                HTTPD data\n                            ")])],1),t._v(" "),n("input-checkbox",{attrs:{value:"dns"},model:{value:t.backup,callback:function(e){t.backup=e},expression:"backup"}},[n("translate",[t._v("\n                                DNS data\n                            ")])],1),t._v(" "),n("input-checkbox",{attrs:{value:"mysql"},model:{value:t.backup,callback:function(e){t.backup=e},expression:"backup"}},[n("translate",[t._v("\n                                MySQL Databases\n                            ")])],1),t._v(" "),n("input-checkbox",{attrs:{value:"custom"},model:{value:t.backup,callback:function(e){t.backup=e},expression:"backup"}},[n("translate",[t._v("Custom Directories & Files")])],1)],1)],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Add user home directories to directory list\n                    ")]),t._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.homeDirs,callback:function(e){t.homeDirs=e},expression:"homeDirs"}})],1)],1),t._v(" "),n("div",{attrs:{slot:"tab:remote"},slot:"tab:remote"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Use Remote Transfer")]),t._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.remoteTransfer,callback:function(e){t.remoteTransfer=e},expression:"remoteTransfer"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Remote transfer method")]),t._v(" "),n("template",{slot:"content"},[n("input-usual-select",{attrs:{options:t.options.selects.transferMethod},model:{value:t.remoteTransferData.method,callback:function(e){t.$set(t.remoteTransferData,"method",e)},expression:"remoteTransferData.method"}}),t._v(" "),"scp"===t.remoteTransferData.method?n("ui-link",{attrs:{href:"/CMD_SYSTEM_BACKUP/id_dsa.pub"}},[n("translate",[t._v("id_dsa.pub for scp (~/user/.ssh/authorized_keys2)")])],1):t._e()],1)],2),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Delete the local backup after remote transfer")]),t._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.remoteTransferData.deleteAfter,callback:function(e){t.$set(t.remoteTransferData,"deleteAfter",e)},expression:"remoteTransferData.deleteAfter"}})],1),t._v(" "),n("ui-form-element",[n("template",{slot:"title"},[n("translate",[t._v("\n                            Incremental file-by-file backup\n                        ")]),t._v(" "),n("ui-tooltip",[n("translate",[t._v("Deletes local file before creating the next one")])],1)],1),t._v(" "),n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.remoteTransferData.incremental,callback:function(e){t.$set(t.remoteTransferData,"incremental",e)},expression:"remoteTransferData.incremental"}})],2),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Remote Host")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex"}],attrs:{slot:"content"},slot:"content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.remoteTransferData.host,expression:"remoteTransferData.host"}],attrs:{type:"text"},domProps:{value:t.remoteTransferData.host},on:{input:function(e){e.target.composing||t.$set(t.remoteTransferData,"host",e.target.value)}}})])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Remote User")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex"}],attrs:{slot:"content"},slot:"content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.remoteTransferData.user,expression:"remoteTransferData.user"}],attrs:{type:"text"},domProps:{value:t.remoteTransferData.user},on:{input:function(e){e.target.composing||t.$set(t.remoteTransferData,"user",e.target.value)}}})])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Remote Password")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex"}],attrs:{slot:"content"},slot:"content"},[n("input-password",{attrs:{type:"text"},model:{value:t.remoteTransferData.password,callback:function(e){t.$set(t.remoteTransferData,"password",e)},expression:"remoteTransferData.password"}})],1)],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Remote Path")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex"}],attrs:{slot:"content"},slot:"content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.remoteTransferData.path,expression:"remoteTransferData.path"}],attrs:{type:"text"},domProps:{value:t.remoteTransferData.path},on:{input:function(e){e.target.composing||t.$set(t.remoteTransferData,"path",e.target.value)}}})])],1)],1),t._v(" "),n("div",{attrs:{slot:"tab:directories"},slot:"tab:directories"},[n("ui-table",t._b({attrs:{checkedRows:t.checkedDirs,disablePagination:""},on:{"update:checkedRows":function(e){t.checkedDirs=e}}},"ui-table",{rows:t.options.directories,rowsCount:t.options.directories.length,columns:[{id:"directory",label:t.$gettext("Directories")}]},!1),[n("ui-table-action",{attrs:{slot:"table:actions"},on:{click:t.deleteDirs},slot:"table:actions"},[n("translate",[t._v("Delete")])],1),t._v(" "),n("tr",{attrs:{slot:"row:new"},slot:"row:new"},[n("td"),t._v(" "),n("td",[n("input-text",{on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addDir(e):null}},model:{value:t.directory,callback:function(e){t.directory=e},expression:"directory"}}),t._v(" "),n("ui-button",{attrs:{theme:"safe",size:"normal",disabled:!t.directory},on:{click:t.addDir}},[n("translate",[t._v("Add")])],1)],1)])],1)],1),t._v(" "),n("div",{attrs:{slot:"tab:files"},slot:"tab:files"},[n("ui-table",t._b({attrs:{checkedRows:t.checkedFiles,disablePagination:""},on:{"update:checkedRows":function(e){t.checkedFiles=e}}},"ui-table",{rows:t.options.files,rowsCount:t.options.files.length,columns:[{id:"file",label:t.$gettext("Files")}]},!1),[n("ui-table-action",{attrs:{slot:"table:actions"},on:{click:t.deleteFiles},slot:"table:actions"},[n("translate",[t._v("Delete")])],1),t._v(" "),n("tr",{attrs:{slot:"row:new"},slot:"row:new"},[n("td"),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.file,expression:"file"}],attrs:{type:"text"},domProps:{value:t.file},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addFile(e):null},input:function(e){e.target.composing||(t.file=e.target.value)}}}),t._v(" "),n("ui-button",{attrs:{theme:"safe",size:"normal"},on:{click:t.addFile}},[n("translate",[t._v("Add")])],1)],1)])],1)],1)])],1),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"primary"},on:{click:t.saveOptions},slot:"footer:buttons"},[n("translate",[t._v("Save")])],1),t._v(" "),t.options.hasLog?n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(e){t.$dialog("VIEW_BACKUP_LOG_DIALOG").open()}},slot:"bottom:links"},[n("translate",[t._v("View Last Backup Log")])],1):t._e(),t._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(e){t.$dialog("CRON_SCHEDULE_DIALOG").open()}},slot:"bottom:links"},[n("translate",[t._v("Cron Schedule")])],1),t._v(" "),n("ui-dialog",{attrs:{id:"VIEW_BACKUP_LOG_DIALOG",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("View Last Backup Log")]),t._v(" "),n("div",{staticClass:"log-wrapper",attrs:{slot:"content"},slot:"content"},[n("iframe",{attrs:{src:"/CMD_SYSTEM_BACKUP/status.log.txt",frameborder:"0"}})])],1),t._v(" "),n("ui-dialog",{attrs:{id:"CRON_SCHEDULE_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Cron Schedule")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.cronData.use_cron,callback:function(e){t.$set(t.cronData,"use_cron",e)},expression:"cronData.use_cron"}},[n("translate",[t._v("Use Cron for Backup")])],1)],1),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Minute")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cronData.minute,expression:"cronData.minute"}],attrs:{slot:"content",type:"text"},domProps:{value:t.cronData.minute},on:{input:function(e){e.target.composing||t.$set(t.cronData,"minute",e.target.value)}},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Hour")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cronData.hour,expression:"cronData.hour"}],attrs:{slot:"content",type:"text"},domProps:{value:t.cronData.hour},on:{input:function(e){e.target.composing||t.$set(t.cronData,"hour",e.target.value)}},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Day of Month")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cronData.dayofmonth,expression:"cronData.dayofmonth"}],attrs:{slot:"content",type:"text"},domProps:{value:t.cronData.dayofmonth},on:{input:function(e){e.target.composing||t.$set(t.cronData,"dayofmonth",e.target.value)}},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Month")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cronData.month,expression:"cronData.month"}],attrs:{slot:"content",type:"text"},domProps:{value:t.cronData.month},on:{input:function(e){e.target.composing||t.$set(t.cronData,"month",e.target.value)}},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Day of Week")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cronData.dayofweek,expression:"cronData.dayofweek"}],attrs:{slot:"content",type:"text"},domProps:{value:t.cronData.dayofweek},on:{input:function(e){e.target.composing||t.$set(t.cronData,"dayofweek",e.target.value)}},slot:"content"})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.saveCron},slot:"buttons"},[n("translate",[t._v("Save")])],1)],1)],1)},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},2497:function(t,e){},2498:function(t,e,n){(t.exports=n(6)(!0)).push([t.i,"#system-backup .select,#system-backup input[type=text]{min-width:240px}#VIEW_BACKUP_LOG_DIALOG .log-wrapper{background-color:#f0f1f1;padding:1rem;font-size:10px;line-height:12px;max-height:500px;overflow-y:auto}#VIEW_BACKUP_LOG_DIALOG .log-wrapper iframe{width:100%}","",{version:3,sources:["/usr/local/directadmin/data/skins/evolution/src/js/pages/admin/system-backup.vue"],names:[],mappings:"AAqXA,uDACkC,eAAgB,CAAI,qCAI9C,yBACA,aACA,eACA,iBACA,iBACA,eAAgB,CAPxB,4CASY,UAAW,CACd",file:"system-backup.vue?vue&type=style&index=0&lang=scss",sourcesContent:['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#system-backup {\n    input[type="text"], .select { min-width: 240px; }\n}\n#VIEW_BACKUP_LOG_DIALOG {\n    .log-wrapper {\n        background-color: #f0f1f1;\n        padding: 1rem;\n        font-size: 10px;\n        line-height: 12px;\n        max-height: 500px;\n        overflow-y: auto;\n        iframe {\n            width: 100%;\n        }\n    }\n}\n'],sourceRoot:""}])},2499:function(t,e,n){"use strict";var a=n(1746);n.n(a).a}}]);