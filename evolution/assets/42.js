(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1102:function(t,e,a){"use strict";a.r(e);var n=a(2065),i=a(1429);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);var o=a(0),r=a(2267),l=a.n(r),u=Object(o.a)(i.default,n.a,n.b,!1,null,null,null);"function"==typeof l.a&&l()(u),e.default=u.exports},1428:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(a(8)),i=d(a(7)),s=d(a(1)),o=d(a(16)),r=d(a(3)),l=a(13),u=d(a(519)),c=d(a(1888));function d(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)({},(0,l.preload)("GET_EMAIL_VACATION_CREATE_OPTIONS"),{components:{"input-date":c.default},computed:(0,l.mapResponse)({GET_EMAIL_VACATION_CREATE_OPTIONS:"apiData"}),data:function(){return{user:"",text:"",start:new Date,starttime:"",end:new Date,endtime:"",subjectPrefix:"",contentType:"",encoding:"",onceSelect:""}},created:function(){var t=this;(0,o.default)(this,{user:this.apiData.poplist.value,start:this.apiData.start.date,end:this.apiData.end.date,starttime:this.apiData.start.time.value,endtime:this.apiData.end.time.value}),this.apiData.headers&&this.apiData.headers.custom_reply_headers&&(this.contentType=this.apiData.headers.reply_content_types.value,this.encoding=this.apiData.headers.reply_encodings.value,this.onceSelect=this.apiData.headers.reply_once_select.value),this.$watch("start",function(e){e>t.end&&(t.end=e)}),this.$watch("starttime",function(e){t.start.getTime()===t.end.getTime()&&t.compareTime(e,t.endtime)&&(t.endtime=e),t.$refs.endinput.$validate(t.end)}),this.$watch("endtime",function(e){t.start.getTime()===t.end.getTime()&&t.compareTime(t.starttime,e)&&(t.starttime=e),t.$refs.endinput.$validate(t.end)})},methods:{compareTime:function(t,e){var a=function(t){return{morning:1,afternoon:2,evening:3}[t]};return a(t)>a(e)},toAPIDate:function(t){var e,a=this[t];return e={},(0,s.default)(e,t+"time",this[t+"time"]),(0,s.default)(e,t+"day",(0,u.default)(a,"DD")),(0,s.default)(e,t+"month",(0,u.default)(a,"MM")),(0,s.default)(e,t+"year",(0,u.default)(a,"YYYY")),e},requestData:function(){var t=(0,r.default)({user:this.user,text:this.text},this.toAPIDate("start"),this.toAPIDate("end"));return this.apiData.headers&&this.apiData.headers.custom_reply_headers&&(t.subject=this.subjectPrefix,t.reply_encoding=this.encoding,t.reply_content_type=this.contentType,t.reply_once_time=this.onceSelect),t},createVacation:function(){var t=this;return(0,i.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("CREATE_EMAIL_VACATION",t.requestData());case 2:if(!e.sent){e.next=7;break}return e.next=6,t.$request("GET_EMAIL_VACATIONS");case 6:t.$router.push({name:"user/email/vacations"});case 7:case"end":return e.stop()}},e,t)}))()},validateTime:function(){return this.start.getTime()!==this.end.getTime()||this.compareTime(this.endtime,this.starttime)}}})},1429:function(t,e,a){"use strict";a.r(e);var n=a(1428),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=i.a},2065:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("app-page-section",[a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Account:")]),t._v(" "),a("input-usual-select",{attrs:{slot:"content",options:t.apiData.poplist.options},slot:"content",model:{value:t.user,callback:function(e){t.user=e},expression:"user"}},[a("template",{slot:"additions:right"},[t._v("@"+t._s(t.$domainUnicode))])],2)],1),t._v(" "),t.contentType?[a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Subject Prefix")]),t._v(" "),a("input-text",{attrs:{slot:"content",suffix:t.$gettext(": original subject")},slot:"content",model:{value:t.subjectPrefix,callback:function(e){t.subjectPrefix=e},expression:"subjectPrefix"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Reply Encoding")]),t._v(" "),a("input-usual-select",{attrs:{slot:"content",options:t.apiData.headers.reply_encodings.options},slot:"content",model:{value:t.encoding,callback:function(e){t.encoding=e},expression:"encoding"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Content-Type")]),t._v(" "),a("input-usual-select",{attrs:{slot:"content",options:t.apiData.headers.reply_content_types.options},slot:"content",model:{value:t.contentType,callback:function(e){t.contentType=e},expression:"contentType"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Reply Frequency")]),t._v(" "),a("input-usual-select",{attrs:{slot:"content",options:t.apiData.headers.reply_once_select.options},slot:"content",model:{value:t.onceSelect,callback:function(e){t.onceSelect=e},expression:"onceSelect"}})],1)]:t._e(),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Start")]),t._v(" "),a("input-date",{attrs:{slot:"content",min:new Date},slot:"content",model:{value:t.start,callback:function(e){t.start=e},expression:"start"}},[a("input-usual-select",{attrs:{slot:"additions:left",options:t.apiData.start.time.options,novalidate:"",width:"20rem"},slot:"additions:left",model:{value:t.starttime,callback:function(e){t.starttime=e},expression:"starttime"}})],1)],1),t._v(" "),a("ui-form-element",{attrs:{group:"vacation",validators:{validateTime:t.validateTime}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation End")]),t._v(" "),a("input-date",{ref:"endinput",attrs:{slot:"content",min:t.start},slot:"content",model:{value:t.end,callback:function(e){t.end=e},expression:"end"}},[a("input-usual-select",{attrs:{slot:"additions:left",options:t.apiData.end.time.options,novalidate:"",width:"20rem"},slot:"additions:left",model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}})],1),t._v(" "),a("translate",{attrs:{slot:"error:validateTime"},slot:"error:validateTime"},[t._v("\n                End time should be larger than start time\n            ")])],1),t._v(" "),a("ui-form-element",{attrs:{group:"vacation",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Vacation Message:")]),t._v(" "),a("input-textarea",{attrs:{slot:"content"},slot:"content",model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Current Server Time:")]),t._v(" "),a("template",{slot:"content"},[t._v("\n                "+t._s(t.apiData.servertime)+"\n            ")])],2)],2),t._v(" "),a("ui-button",{attrs:{slot:"footer:buttons",theme:"primary",disabled:!t.$valid("vacation")},on:{click:t.createVacation},slot:"footer:buttons"},[a("translate",[t._v("Create")])],1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},2267:function(t,e){}}]);