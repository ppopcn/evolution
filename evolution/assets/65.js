(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1125:function(t,e,n){"use strict";n.r(e);var a=n(2037),r=n(1500);for(var s in r)"default"!==s&&function(t){n.d(e,t,function(){return r[t]})}(s);n(2316);var u=n(0),o=n(2314),i=n.n(o),c=Object(u.a)(r.default,a.a,a.b,!1,null,null,null);"function"==typeof i.a&&i()(c),e.default=c.exports},1498:function(t,e,n){var a=n(2315);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("0c3d0a20",a,!0,{})},1499:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c(n(3)),r=c(n(8)),s=c(n(7)),u=n(13),o=n(20),i=n(19);function c(t){return t&&t.__esModule?t:{default:t}}var d,l=(d=(0,s.default)(r.default.mark(function t(e,n){var a,s;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={ptr:n.query.pointer||null},t.next=4,(0,u.request)("CHECK_DNSSEC_STATUS",a);case 4:(s=t.sent).keys&&(0,u.request)("GET_DNSSEC_KEYS",a),s.zone&&(0,u.request)("GET_DNSSEC_ZONE",a),e(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e(t.t0);case 13:case"end":return t.stop()}},t,void 0,[[0,10]])})),function(t,e){return d.apply(this,arguments)});e.default={beforeRouteEnter:function(t,e,n){var a=this;return(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.State)("app.tokens.HAVE_DNSSEC")){e.next=3;break}return n("/account-manager/dns"),e.abrupt("return");case 3:l(n,t);case 4:case"end":return e.stop()}},e,a)}))()},beforeRouteUpdate:function(t,e,n){var a=this;return(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.params.domain&&a.$store.commit("app/SET_DOMAIN",t.params.domain),l(n);case 2:case"end":return e.stop()}},e,a)}))()},computed:(0,a.default)({},(0,o.mapState)({domain:function(t){return t.app.domain},keys:function(t){return t.api.GET_DNSSEC_KEYS.response},zone:function(t){return t.api.GET_DNSSEC_ZONE.response},status:function(t){return t.api.CHECK_DNSSEC_STATUS.response},zoneLoaded:function(t){return t.api.GET_DNSSEC_ZONE.isDone},keysLoaded:function(t){return t.api.GET_DNSSEC_KEYS.isDone}}),{keysRows:function(){return this.keysLoaded?[{id:this.$gettext("Zone-Signing Key"),data:this.keys.zone},{id:this.$gettext("Key-Signing Key"),data:this.keys.key}]:[]},zoneRows:function(){return[{label:this.$gettext("Signed"),value:this.zone.signedDate},{label:this.$gettext("Expiry"),value:this.zone.expiryDate},{label:this.$gettext("DS Record"),value:this.zone.DS},{label:this.$gettext("DLV Record"),value:this.zone.DLV}]},ptr:function(){return this.$route.query.pointer||null}}),watch:{domain:function(){var t=this;return(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$request("CHECK_DNSSEC_STATUS"),t.$request("GET_DNSSEC_KEYS"),t.$request("GET_DNSSEC_ZONE");case 3:case"end":return e.stop()}},e,t)}))()}},methods:{generateKeys:function(){var t=this;return(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("GENERATE_DNSSEC_KEYS",t.$get("ptr"));case 2:t.$request("CHECK_DNSSEC_STATUS",t.$get("ptr")),t.$request("GET_DNSSEC_KEYS",t.$get("ptr"));case 4:case"end":return e.stop()}},e,t)}))()},signZone:function(){var t=this;return(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("SIGN_DNSSEC_ZONE",t.$get("ptr"));case 2:t.$request("CHECK_DNSSEC_STATUS",t.$get("ptr")),t.$request("GET_DNSSEC_ZONE",t.$get("ptr"));case 4:case"end":return e.stop()}},e,t)}))()}}}},1500:function(t,e,n){"use strict";n.r(e);var a=n(1499),r=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e.default=r.a},2037:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("template",{slot:"header:buttons"},[t.zoneLoaded&&t.status.keys?n("ui-button",{attrs:{theme:"primary"},on:{click:t.signZone}},[n("translate",[t._v("Re-sign your zone")])],1):t._e(),t._v(" "),!t.keysLoaded||t.zoneLoaded||t.status.zone||t.$state.api.GET_DNSSEC_ZONE.isLoading?t._e():n("ui-button",{attrs:{theme:"primary"},on:{click:t.signZone}},[n("translate",[t._v("Sign your zone")])],1),t._v(" "),n("ui-button",{attrs:{theme:"safe"},on:{click:t.generateKeys}},[n("translate",[t._v("Generate Keys")])],1)],1),t._v(" "),t.zoneLoaded&&t.keysLoaded&&t.status.keys?n("app-page-section",[t.status.zone?n("table",t._l(t.zoneRows,function(e){return n("tr",[n("translate",{staticClass:"txt:bold",attrs:{tag:"td"}},[t._v(t._s(e.label))]),t._v(" "),e.value instanceof Date?n("td",[t._v(t._s(t._f("date")(e.value)))]):n("td",[n("ui-code-area",{attrs:{breakLines:"",content:e.value}})],1)],1)})):n("h5",[n("translate",{staticClass:"c:txt:danger"},[t._v("\n                Zone keys are newer than the Zone Signing.\n            ")])],1)]):t._e(),t._v(" "),t.keysLoaded?n("app-page-section",[t.status.keys?n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Keys")]):t._e(),t._v(" "),t.status.keys?n("table",[n("tr",[n("translate",{attrs:{tag:"th"}},[t._v("Key")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("ID")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("Created")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("Published")]),t._v(" "),n("translate",{attrs:{tag:"th"}},[t._v("Activated")])],1),t._v(" "),t._l(t.keysRows,function(e){return[n("tr",[n("td",{staticClass:"txt:bold"},[t._v(t._s(e.id))]),t._v(" "),n("td",[t._v(t._s(e.data.id))]),t._v(" "),n("td",[t._v(t._s(t._f("date")(e.data.created)))]),t._v(" "),n("td",[t._v(t._s(t._f("date")(e.data.published)))]),t._v(" "),n("td",[t._v(t._s(t._f("date")(e.data.activated)))])]),t._v(" "),n("tr",[n("td",{attrs:{colspan:"5"}},[n("ui-code-area",{attrs:{breakLines:"",content:e.data.key}})],1)])]})],2):t._e()],1):t._e(),t._v(" "),t.status.keys?t._e():n("app-page-section",[n("h5",[n("translate",{staticClass:"c:txt:danger"},[t._v("\n                Keys not yet generated.\n            ")])],1)])],2)},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},2314:function(t,e){},2315:function(t,e,n){(t.exports=n(6)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"security.vue?vue&type=style&index=0&lang=scss",sourceRoot:""}])},2316:function(t,e,n){"use strict";var a=n(1498);n.n(a).a}}]);