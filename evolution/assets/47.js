(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1107:function(e,t,a){"use strict";a.r(t);var s=a(2058),l=a(1439);for(var i in l)"default"!==i&&function(e){a.d(t,e,function(){return l[e]})}(i);var n=a(0),r=a(2275),o=a.n(r),u=Object(n.a)(l.default,s.a,s.b,!1,null,null,null);"function"==typeof o.a&&o()(u),t.default=u.exports},1438:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(a(8)),l=o(a(7)),i=o(a(3)),n=a(13),r=a(4);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)({},(0,n.preload)("GET_SPAMASSASSIN_INFO"),{data:function(){return{values:r._.cloneDeep(this.initialValues),newBlacklistEmail:"",newWhitelistEmail:""}},computed:(0,n.mapResponse)({GET_SPAMASSASSIN_INFO:{enabled:"enabled",initialValues:"values"}}),methods:{reloadSettings:function(){this.$request("GET_SPAMASSASSIN_INFO")},checkUniqueness:function(e){var t=this;return function(a){return!t.values[e].includes(a)}},disableSpamAssassin:function(){var e=this;return(0,l.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("DISABLE_SPAMASSASSIN");case 2:t.sent&&e.reloadSettings();case 4:case"end":return t.stop()}},t,e)}))()},enableSpamAssassin:function(){var e=this;return(0,l.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("ENABLE_SPAMASSASSIN");case 2:if(!t.sent){t.next=4;break}e.reloadSettings();case 4:case"end":return t.stop()}},t,e)}))()},addToList:function(e,t){this.values[e].push(this.$p6e.email2ascii(t)),t=""},removeFromList:function(e,t){this.values[e]=this.values[e].filter(function(e){return e!==t})},saveValues:function(){this.$actionRequest("UPDATE_SPAMASSASSIN",{domain:this.domain,values:this.values})},deleteBayesData:function(){this.$actionRequest("DELETE_SPAMASSASSIN_BAYES_DATA")}},created:function(){var e=this;this.values=r._.cloneDeep(this.initialValues),this.$watch("values.required_hits",function(t,a){"custom"===t&&(e.values.required_hits_custom=a)})}})},1439:function(e,t,a){"use strict";a.r(t);var s=a(1438),l=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);t.default=l.a},2058:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",[a("template",{slot:"header:buttons"},[e.enabled?a("ui-button",{attrs:{theme:"primary"},on:{click:e.disableSpamAssassin}},[a("translate",[e._v("Disable SpamAssassin")])],1):e._e()],1),e._v(" "),e.enabled?a("app-page-section",[a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Where do you want the spam to go?\n            ")]),e._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[a("input-check",{attrs:{type:"radio",value:"inbox"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[a("translate",[e._v("Inbox (don't block it)")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"spamfolder"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[a("translate",[e._v("Redirect it to the catch-all spam folder in your main IMAP acount")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"userspamfolder"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[a("translate",[e._v("Send the spam to the user's spam folder")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"delete"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[a("translate",[e._v("Delete the spam")])],1)],1)],1),e._v(" "),a("ui-form-element",[a("div",{attrs:{slot:"title"},slot:"title"},[a("translate",[e._v("\n                    What score threshold do you wish to use?\n                ")]),e._v(" "),a("ui-tooltip",[a("translate",[e._v("A lower threshold will block more spam, but can potentially tag legitimate mail.")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("A higher threshold will let more spam through, but is less likely to tag legitimate mail.")])],1)],1),e._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[a("input-check",{attrs:{type:"radio",value:"5.0"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[a("translate",[e._v("Low Threshold (5.0)")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"7.5"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[a("translate",[e._v("Medium Threshold (7.5)")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"10.0"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[a("translate",[e._v("High Threshold (10.0)")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"custom"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[a("translate",[e._v("Custom Threshold")]),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.values.required_hits_custom,expression:"values.required_hits_custom"}],attrs:{type:"text"},domProps:{value:e.values.required_hits_custom},on:{input:function(t){t.target.composing||e.$set(e.values,"required_hits_custom",t.target.value)}}})])],1)])],1)]),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Would you like to delete high scoring spam?\n            ")]),e._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[a("input-check",{attrs:{type:"radio",value:"yes"},model:{value:e.values.high_score_block,callback:function(t){e.$set(e.values,"high_score_block",t)},expression:"values.high_score_block"}},[a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[a("translate",[e._v("Yes, block all spam scoring higher than:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values.high_score,expression:"values.high_score"}],attrs:{type:"text"},domProps:{value:e.values.high_score},on:{input:function(t){t.target.composing||e.$set(e.values,"high_score",t.target.value)}}}),e._v(" "),a("ui-tooltip",[a("translate",[e._v("1-50, no decimals")])],1)],1)]),e._v(" "),a("input-check",{attrs:{type:"radio",value:"no"},model:{value:e.values.high_score_block,callback:function(t){e.$set(e.values,"high_score_block",t)},expression:"values.high_score_block"}},[a("translate",[e._v("No, do not block high scoring spam. Use only the threshold in the previous section.")])],1)],1)],1),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Do you wish to rewrite the subject of a spam e-mail?\n            ")]),e._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[a("input-check",{attrs:{type:"radio",value:"1"},model:{value:e.values.rewrite_subject,callback:function(t){e.$set(e.values,"rewrite_subject",t)},expression:"values.rewrite_subject"}},[a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[a("translate",[e._v("Yes, set the subject to the following:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values.subject_tag,expression:"values.subject_tag"}],attrs:{type:"text"},domProps:{value:e.values.subject_tag},on:{input:function(t){t.target.composing||e.$set(e.values,"subject_tag",t.target.value)}}})],1)]),e._v(" "),a("input-check",{attrs:{type:"radio",value:"0"},model:{value:e.values.rewrite_subject,callback:function(t){e.$set(e.values,"rewrite_subject",t)},expression:"values.rewrite_subject"}},[a("translate",[e._v("No, leave the subject unchanged.")])],1)],1)],1),e._v(" "),a("ui-form-element",[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n                How should the spam be delivered?\n                "),a("ui-tooltip",[a("translate",[e._v("Attachments will seperate the spam into its own message, preventing scripts from being run.")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("Text-only attachements are used for increased safety.")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("Not using attachments will leave the spam unaltered except for spam headers.")])],1)],1),e._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[a("input-check",{attrs:{type:"radio",value:"0"},model:{value:e.values.report_safe,callback:function(t){e.$set(e.values,"report_safe",t)},expression:"values.report_safe"}},[a("translate",[e._v("Don't use attachments (dangerous).")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"1"},model:{value:e.values.report_safe,callback:function(t){e.$set(e.values,"report_safe",t)},expression:"values.report_safe"}},[a("translate",[e._v("Use attachments.")])],1),e._v(" "),a("input-check",{attrs:{type:"radio",value:"2"},model:{value:e.values.report_safe,callback:function(t){e.$set(e.values,"report_safe",t)},expression:"values.report_safe"}},[a("translate",[e._v("Use text-only attachments.")])],1)],1)]),e._v(" "),a("ui-form-element",[a("div",{attrs:{slot:"title"},slot:"title"},[a("translate",[e._v("E-mail Blacklist")]),e._v(" "),a("ui-tooltip",[a("translate",[e._v("\n                        This is the list of e-mail address that will be blocked.\n                    ")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("\n                        Any e-mail from these addresses will automatically be tagged as spam.\n                    ")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("\n                        eg: *@domain.com\n                    ")])],1)],1),e._v(" "),a("ui-table",e._b({attrs:{slot:"content"},slot:"content",scopedSlots:e._u([{key:"col:delete-action",fn:function(t){var s=t.item;return[a("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(t){e.removeFromList("blacklist_from",s.email)}}},[a("translate",[e._v("Remove")])],1)]}},{key:"col:email",fn:function(t){var a=t.email;return[e._v("\n                    "+e._s(e._f("p6e-unicode-email")(a))+"\n                ")]}}])},"ui-table",{rows:e.values.blacklist_from.map(function(e){return{email:e}}),columns:[{id:"email",label:e.$gettext("Blocked E-mail")},{id:"delete-action"}],isCheckable:!1},!1),[a("template",{slot:"row:new"},[a("tr",[a("td",{attrs:{colspan:"2"}},[a("ui-form-element",{attrs:{slot:"content",vertical:"",group:"blacklist",validators:{required:!0,email:!0,unique:e.checkUniqueness("blacklist_from")}},slot:"content"},[a("ui-input-group",{attrs:{slot:"content"},slot:"content"},[a("input-text",{attrs:{slot:"input"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$valid("blacklist")&&e.addToList("blacklist_from",e.newBlacklistEmail)&&(e.newBlacklistEmail="")}},slot:"input",model:{value:e.newBlacklistEmail,callback:function(t){e.newBlacklistEmail=t},expression:"newBlacklistEmail"}}),e._v(" "),a("ui-button",{attrs:{slot:"additions:right",theme:"safe",icon:"plus-fill",validateGroup:"blacklist"},on:{click:function(t){e.addToList("blacklist_from",e.newBlacklistEmail),e.newBlacklistEmail=""}},slot:"additions:right"},[a("translate",[e._v("Add")])],1)],1),e._v(" "),a("translate",{attrs:{slot:"error:email"},slot:"error:email"},[e._v("\n                                    Should be valid email\n                                ")]),e._v(" "),a("translate",{attrs:{slot:"error:unique"},slot:"error:unique"},[e._v("\n                                    Already in the list\n                                ")])],1)],1)])])],2)],1),e._v(" "),a("ui-form-element",[a("div",{attrs:{slot:"title"},slot:"title"},[a("translate",[e._v("E-mail Whitelist")]),e._v(" "),a("ui-tooltip",[a("translate",[e._v("\n                        This is the list of e-mail address that will be allowed through, regardless of content.\n                    ")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("\n                        The format is the same as the E-mail Blacklist\n                    ")])],1)],1),e._v(" "),a("ui-table",e._b({attrs:{slot:"content"},slot:"content",scopedSlots:e._u([{key:"col:email",fn:function(t){var a=t.email;return[e._v("\n                    "+e._s(e._f("p6e-unicode-email")(a))+"\n                ")]}},{key:"col:delete-action",fn:function(t){var s=t.item;return a("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(t){e.removeFromList("whitelist_from",s.email)}}},[a("translate",[e._v("Remove")])],1)}}])},"ui-table",{rows:e.values.whitelist_from.map(function(e){return{email:e}}),columns:[{id:"email",label:e.$gettext("Whitelisted E-mail")},{id:"delete-action"}],isCheckable:!1},!1),[a("tr",{attrs:{slot:"row:new"},slot:"row:new"},[a("td",{attrs:{colspan:"2"}},[a("ui-form-element",{attrs:{slot:"content",vertical:"",group:"whitelist",validators:{required:!0,email:!0,unique:e.checkUniqueness("whitelist_from")}},slot:"content"},[a("ui-input-group",{attrs:{slot:"content"},slot:"content"},[a("input-text",{attrs:{slot:"input"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$valid("whitelist")&&e.addToList("whitelist_from",e.newWhitelistEmail)&&(e.newWhitelistEmail="")}},slot:"input",model:{value:e.newWhitelistEmail,callback:function(t){e.newWhitelistEmail=t},expression:"newWhitelistEmail"}}),e._v(" "),a("ui-button",{attrs:{slot:"additions:right",theme:"safe",icon:"plus-fill",validateGroup:"whitelist"},on:{click:function(t){e.addToList("whitelist_from",e.newWhitelistEmail),e.newWhitelistEmail=""}},slot:"additions:right"},[a("translate",[e._v("Add")])],1)],1),e._v(" "),a("translate",{attrs:{slot:"error:email"},slot:"error:email"},[e._v("\n                                Should be valid email\n                            ")]),e._v(" "),a("translate",{attrs:{slot:"error:unique"},slot:"error:unique"},[e._v("\n                                Already in the list\n                            ")])],1)],1)])])],1)],1):a("app-page-section",[a("translate",[e._v("SpamAssassin is not currently enabled.")])],1),e._v(" "),a("template",{slot:"footer:buttons"},[e.enabled?[a("ui-button",{attrs:{theme:"safe"},on:{click:e.saveValues}},[a("translate",[e._v("Save")])],1),e._v(" "),a("ui-tooltip",{attrs:{position:"left"}},[a("ui-button",{attrs:{slot:"trigger",theme:"danger"},on:{click:e.deleteBayesData},slot:"trigger"},[a("translate",[e._v("Delete Bayes Data")])],1),e._v(" "),a("translate",[e._v("\n                    This button will remove data learned by spamassassin.\n                ")]),e._v(" "),a("br"),e._v(" "),a("translate",[e._v("\n                    It will free up some space, but will reset any learned progress SpamAssassin has previously made.\n                ")])],1)]:a("ui-button",{attrs:{theme:"primary"},on:{click:e.enableSpamAssassin}},[a("translate",[e._v("Enable SpamAssassin")])],1)],2),e._v(" "),e.enabled?a("template",{slot:"bottom:links"},[a("ui-link",{attrs:{name:"user/filemanager/edit",query:{path:"/.spamassassin/user_prefs"},bullet:""}},[a("translate",[e._v("Manually edit the config file yourself")])],1)],1):e._e()],2)},l=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return l})},2275:function(e,t){}}]);