(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1149:function(e,t,n){"use strict";n.r(t);var o=n(2020),r=n(1642);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);var a=n(0),s=n(2411),u=n.n(s),l=Object(a.a)(r.default,o.a,o.b,!1,null,null,null);"function"==typeof u.a&&u()(l),t.default=l.exports},1636:function(e,t,n){var o=n(2412);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(5).default)("1dc220c7",o,!0,{})},1637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(8)),r=s(n(7)),i=s(n(16)),a=s(n(520));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){return{file:null,colors:[],colorOptions:[],customizations:{}}};t.default={components:{DropzoneFilePreview:a.default},inheritAttrs:!1,props:{skin:String},data:u,computed:{defaultLogo:function(){return this.skin?"/CMD_SKINS?action=view_custom_logo&name="+this.skin+"&"+Date.now():""},defaultLogoVisible:function(){return this.file&&!this.file.name}},methods:{resetState:function(){(0,i.default)(this,{file:null,colors:[],colorOptions:[],customizations:{}}),this.resetLogoPreview()},handleOpen:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$request("GET_SKIN_COLORS",{name:e.skin});case 2:return e.colorOptions=t.sent,t.next=5,e.$request("GET_SKIN_CUSTOMIZATIONS",{name:e.skin});case 5:e.customizations=t.sent;case 6:case"end":return t.stop()}},t,e)}))()},handleReset:function(e){var t=this;return(0,r.default)(o.default.mark(function n(){return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("logo"!==e){n.next=3;break}return n.next=3,t.resetLogo();case 3:if("colors"!==e){n.next=6;break}return n.next=6,t.resetColors();case 6:t.$emit("customized"),t.close();case 8:case"end":return n.stop()}},n,t)}))()},handleSave:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.defaultLogoVisible){t.next=3;break}return t.next=3,e.uploadLogo();case 3:if(!e.colors.length){t.next=6;break}return t.next=6,e.saveColors();case 6:e.close(),e.$emit("customized");case 8:case"end":return t.stop()}},t,e)}))()},close:function(){this.$dialog("CUSTOMIZE_SKIN_DIALOG").close()},resetColors:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("CLEAR_SKIN_COLORS",{name:e.skin});case 2:case"end":return t.stop()}},t,e)}))()},resetLogo:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("RESET_SKIN_LOGO",{name:e.skin});case 2:case"end":return t.stop()}},t,e)}))()},uploadLogo:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("UPLOAD_SKIN_LOGO",{name:e.skin,file:e.file});case 2:case"end":return t.stop()}},t,e)}))()},saveColors:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("SAVE_SKIN_COLORS",{name:e.skin,colors:e.colors});case 2:case"end":return t.stop()}},t,e)}))()},resetLogoPreview:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.file=new File([],"");case 1:case"end":return t.stop()}},t,e)}))()}},created:function(){this.resetLogoPreview()}}},1638:function(e,t,n){"use strict";n.r(t);var o=n(1637),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t.default=r.a},1639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(8)),r=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}t.default={inheritAttrs:!1,data:function(){return{name:"",serverwide:!0,file:null}},methods:{uploadSkin:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("UPLOAD_SKIN",{file:e.file,name:e.name,server:e.serverwide?"yes":"no"});case 2:t.sent&&(e.$emit("uploaded"),e.$dialog("UPLOAD_SKIN_DIALOG").close());case 4:case"end":return t.stop()}},t,e)}))()}}}},1640:function(e,t,n){"use strict";n.r(t);var o=n(1639),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t.default=r.a},1641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(8)),r=c(n(7)),i=c(n(3)),a=n(20),s=n(13),u=c(n(2415)),l=c(n(2414));function c(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)({},(0,s.preload)("GET_SKINS"),{components:{UploadSkinDialog:u.default,CustomizeSkinDialog:l.default},data:function(){return{customizedSkin:{file:null,base64:"",colors:[]},checkedRows:[],selectedSkin:null}},computed:(0,i.default)({},(0,a.mapState)({skins:function(e){return e.api.GET_SKINS.response}}),(0,s.mapTokens)({currentSkin:"SKIN"}),{checkedSkins:function(){return this.checkedRows.map(function(e){return e.skin})}}),methods:{reloadSkins:function(){this.$request("GET_SKINS")},deleteSkins:function(){var e=this;return(0,r.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("DELETE_SKINS",{select:e.checkedSkins});case 2:t.sent&&(e.reloadSkins(),e.checkedRows=[]);case 4:case"end":return t.stop()}},t,e)}))()},applySkin:function(e){var t=this;return(0,r.default)(o.default.mark(function n(){return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$actionRequest("APPLY_SKIN",{skin:t.checkedSkins[0],apply_as:e});case 2:n.sent&&(window.location="/CMD_SKINS");case 4:case"end":return n.stop()}},n,t)}))()},customizeSkin:function(e){var t=this;return(0,r.default)(o.default.mark(function n(){return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.selectedSkin=e,t.$dialog("CUSTOMIZE_SKIN_DIALOG").open();case 2:case"end":return n.stop()}},n,t)}))()}}})},1642:function(e,t,n){"use strict";n.r(t);var o=n(1641),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t.default=r.a},1971:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",e._g({attrs:{id:"UPLOAD_SKIN_DIALOG",noAutoClose:""},on:{"dialog:close":e.$reset}},e.$listeners),[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Upload Skin")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",[n("input-dropzone",{attrs:{slot:"content",accept:[".tar.gzip"]},slot:"content",model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Name:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{slot:"content",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}},slot:"content"})],1),e._v(" "),n("ui-form-element",[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.serverwide,callback:function(t){e.serverwide=t},expression:"serverwide"}},[n("translate",[e._v("Install Serverwide")])],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe",disabled:!e.file||!e.name},on:{click:e.uploadSkin},slot:"buttons"},[n("translate",[e._v("Upload")])],1)],2)},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},1995:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",e._g({attrs:{id:"CUSTOMIZE_SKIN_DIALOG",size:"normal",theme:"primary",noAutoClose:""},on:{"dialog:open":e.handleOpen,"dialog:close":e.resetState}},e.$listeners),[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Customize Skin")]),e._v(" "),n("template",{slot:"content"},[n("ui-in-place-loader",{attrs:{requests:["GET_SKIN_COLORS","GET_SKIN_CUSTOMIZATIONS"]}},[n("div",[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Logo:")]),e._v(" "),n("input-dropzone",{attrs:{slot:"content",accept:["image/*"]},slot:"content",model:{value:e.file,callback:function(t){e.file=t},expression:"file"}},[e.file?n("dropzone-file-preview",e._b({attrs:{slot:"preview",image:e.defaultLogoVisible?e.defaultLogo:"",noInfo:"",showPreview:""},on:{removeFile:function(t){e.file=null}},slot:"preview"},"dropzone-file-preview",{file:e.file},!1)):e._e()],1)],1),e._v(" "),e._l(e.colorOptions,function(t,o){return n("ui-form-element",{key:o},[n("translate",{attrs:{slot:"title","translate-params":{index:o+1}},slot:"title"},[e._v("\n                        Custom Color %{index}\n                    ")]),e._v(" "),n("input-color",{attrs:{slot:"content",colors:"*"!==t.options?t.options:void 0,value:e.colors[o]||t.current||t.default},on:{change:function(t){e.$set(e.colors,o,t)}},slot:"content"})],1)})],2)])],1),e._v(" "),n("template",{slot:"buttons"},[e.customizations.logo?n("ui-button",{attrs:{theme:"danger"},on:{click:function(t){e.handleReset("logo")}}},[n("translate",[e._v("Reset logo")])],1):e._e(),e._v(" "),e.customizations.colors?n("ui-button",{attrs:{theme:"danger"},on:{click:function(t){e.handleReset("colors")}}},[n("translate",[e._v("Reset colors")])],1):e._e(),e._v(" "),n("ui-button",{attrs:{disabled:!(e.colors.length||e.file&&!e.defaultLogoVisible),theme:"safe"},on:{click:e.handleSave}},[n("translate",[e._v("Save")])],1)],1)],2)},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},2020:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("template",{slot:"header:buttons"},[n("ui-button",{attrs:{theme:"safe"},on:{click:function(t){e.$dialog("UPLOAD_SKIN_DIALOG").open()}}},[n("translate",[e._v("Upload Skin")])],1)],1),e._v(" "),n("app-page-section",[n("ui-table",{attrs:{rows:e.skins,columns:[{id:"skin",label:e.$gettext("Skin Name")},{id:"path",label:e.$gettext("Path")},{id:"owner",label:e.$gettext("Skin Owner")},{id:"inline-actions",width:"1%"}],checkedRows:e.checkedRows,disablePagination:""},on:{"update:checkedRows":function(t){e.checkedRows=t}},scopedSlots:e._u([{key:"col:skin",fn:function(t){var o=t.skin;return n("ui-grid",{},[n("span",[e._v(e._s(o))]),e._v(" "),o===e.currentSkin?n("ui-badge",{attrs:{theme:"primary",size:"small"}},[n("translate",[e._v("Current")])],1):e._e()],1)}},{key:"col:inline-actions",fn:function(t){var o=t.item;return[o.canLogo?n("ui-button-icon",{attrs:{icon:"pencil",title:e.$gettext("Customize")},on:{click:function(t){e.customizeSkin(o.skin)}}}):e._e()]}}])},[n("template",{slot:"table:actions"},[1===e.checkedSkins.length?n("ui-table-action",{on:{click:function(t){e.applySkin("reseller")}}},[n("translate",[e._v("Apply to Me")])],1):e._e(),e._v(" "),1===e.checkedSkins.length?n("ui-table-action",{on:{click:function(t){e.applySkin("all")}}},[n("translate",[e._v("Apply to All Users")])],1):e._e(),e._v(" "),n("ui-table-action",{on:{click:function(t){e.$dialog("DELETE_SKINS_DIALOG").open()}}},[n("translate",[e._v("Delete")])],1)],1)],2)],1),e._v(" "),n("upload-skin-dialog",{on:{uploaded:e.reloadSkins}}),e._v(" "),n("customize-skin-dialog",{attrs:{skin:e.selectedSkin},on:{"dialog:close":function(t){e.selectedSkin=null},customized:e.reloadSkins}}),e._v(" "),n("ui-dialog-delete-items",{attrs:{id:"DELETE_SKINS_DIALOG",subject:e.$ngettext("selected skin","selected skins",e.checkedSkins.length)},on:{"click:confirm":e.deleteSkins}})],2)},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},2411:function(e,t){},2412:function(e,t,n){(e.exports=n(6)(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"customize-skin-dialog.vue?vue&type=style&index=0&lang=scss",sourceRoot:""}])},2413:function(e,t,n){"use strict";var o=n(1636);n.n(o).a},2414:function(e,t,n){"use strict";n.r(t);var o=n(1995),r=n(1638);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n(2413);var a=n(0),s=Object(a.a)(r.default,o.a,o.b,!1,null,null,null);t.default=s.exports},2415:function(e,t,n){"use strict";n.r(t);var o=n(1971),r=n(1640);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);var a=n(0),s=Object(a.a)(r.default,o.a,o.b,!1,null,null,null);t.default=s.exports}}]);