(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1084:function(t,e,n){"use strict";n.r(e);var s=n(2083),a=n(1344);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var o=n(0),i=n(2198),u=n.n(i),l=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof u.a&&u()(l),e.default=l.exports},1332:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(8)),a=r(n(7));function r(t){return t&&t.__esModule?t:{default:t}}e.default={methods:{openTicket:function(t){var e=this;return(0,a.default)(s.default.mark(function n(){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$request("GET_USER_TICKET",{number:t});case 2:e.$dialog("VIEW_TICKET_DIALOG").open();case 3:case"end":return n.stop()}},n,e)}))()}}}},1333:function(t,e,n){"use strict";n.r(e);var s=n(1332),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},1334:function(t,e,n){var s=n(2200);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(5).default)("574f32f2",s,!0,{})},1335:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8)),a=o(n(7)),r=n(13);function o(t){return t&&t.__esModule?t:{default:t}}e.default={computed:(0,r.mapResponse)({GET_USER_TICKET:{messages:"response",number:"params.number"}}),data:function(){return{message:""}},filters:{firstLetter:function(t){return t[0].toUpperCase()}},methods:{postReply:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("REPLY_USER_TICKET",t.$get(["number","message"]),{reset:!0});case 2:t.$request("GET_USER_TICKET",t.$get("number"));case 3:case"end":return e.stop()}},e,t)}))()}}}},1336:function(t,e,n){"use strict";n.r(e);var s=n(1335),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},1337:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(8)),a=i(n(7)),r=i(n(16)),o=n(13);function i(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{send:!1,email:"",days:{tickets:"0",messages:"0"}}},computed:(0,o.mapResponse)({GET_MESSAGE_SYSTEM_OPTIONS:"options"}),created:function(){(0,r.default)(this,this.options)},methods:{save:function(){var t=this;return(0,a.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("SAVE_MESSAGE_SYSTEM_OPTIONS",{delete_messages_days:t.days.messages,delete_tickets_days:t.days.tickets,ON:t.send,email:t.email});case 2:n=e.sent,n.success&&t.$notifications.success({title:"Options saved successfully"});case 5:case"end":return e.stop()}},e,t)}))()}}}},1338:function(t,e,n){"use strict";n.r(e);var s=n(1337),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},1339:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8)),a=o(n(7)),r=n(13);function o(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{subject:"",when:"all",days:"1"}},computed:(0,r.mapResponse)({GET_CLEAR_MESSAGES_OPTIONS:["subjects","periods"]}),methods:{clearMessageSystem:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("CLEAR_MESSAGE_SYSTEM",{delete_messages_days:t.days,subject:t.subject,when:t.when});case 2:t.$request("GET_TOKENS");case 3:case"end":return e.stop()}},e,t)}))()}}}},1340:function(t,e,n){"use strict";n.r(e);var s=n(1339),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},1341:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(13);e.default={computed:(0,s.mapResponse)({GET_MESSAGE:["content","time","subject"]})}},1342:function(t,e,n){"use strict";n.r(e);var s=n(1341),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},1343:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=f(n(8)),a=f(n(7)),r=f(n(3)),o=n(13),i=f(n(2205)),u=f(n(2204)),l=f(n(2203)),c=f(n(2202)),d=f(n(2199));function f(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)({components:{TicketsTable:d.default,ViewMessageDialog:i.default,ClearMessageSystemDialog:u.default,MessageSystemOptionsDialog:l.default,ViewTicketDialog:c.default}},(0,o.preload)(["GET_MESSAGES","GET_USER_TICKETS","GET_CLEAR_MESSAGES_OPTIONS","GET_MESSAGE_SYSTEM_OPTIONS"]),{data:function(){return{select:[]}},beforeRouteUpdate:function(t,e,n){this.$dialog("VIEW_MESSAGE_DIALOG").close(),t.query.id&&this.openMessageDialog(t.query.id,!0),n()},created:function(){this.$route.query.id&&this.openMessageDialog(this.$route.query.id,!0)},methods:{openMessageDialog:function(t){var e=this;return(0,a.default)(s.default.mark(function n(){return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$request("GET_MESSAGE",{number:t});case 2:if(!n.sent){n.next=7;break}e.$dialog("VIEW_MESSAGE_DIALOG").open(),e.$request("GET_TOKENS"),n.next=8;break;case 7:e.$notifications.error({title:e.$gettext("Cannot execute your request"),content:e.$gettext("Message #"+t+" is not appears in your message system")});case 8:case"end":return n.stop()}},n,e)}))()},deleteMessages:function(){this.$actionRequest("DELETE_MESSAGES",this.$get("select"),{reset:!0})}}})},1344:function(t,e,n){"use strict";n.r(e);var s=n(1343),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},1977:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-api-table",t._b({scopedSlots:t._u([{key:"col:subject",fn:function(e){var s=e.new,a=e.priority,r=e.subject,o=e.ticket;return n("ui-link",{class:{strong:s},on:{click:function(e){t.openTicket(o)}}},[n("ui-round-badge",{attrs:{theme:{10:"safe",20:"primary",30:"danger"}[a],size:12}}),t._v("\n        "+t._s(r)+"\n    ")],1)}},{key:"col:status",fn:function(e){var s=e.status;return n("ui-badge",{attrs:{theme:{open:"safe",closed:"neutral"}[s]}},[t._v("\n        "+t._s(t._f("capitalize")(s))+"\n    ")])}}])},"ui-api-table",{endpoint:"GET_USER_TICKETS",rowID:"ticket",columns:{ticket:t.$gettext("Ticket #"),subject:t.$gettext("Subject"),replies:t.$gettext("Replies"),status:t.$gettext("Status"),last_message:{label:t.$gettext("Last Message"),filter:"date"}}},!1))},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},1979:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"VIEW_TICKET_DIALOG",size:"normal",noCloseBtn:""}},[n("translate",{attrs:{slot:"title","translate-params":{number:t.number}},slot:"title"},[t._v("View Ticket: #%{ number }")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{staticClass:"pos:rel",attrs:{vertical:"",validators:{required:!0},group:"ticketReply"}},[n("input-textarea",{attrs:{slot:"content",rows:"5",placeholder:t.$gettext("Type your reply here...")},slot:"content",model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),n("ui-button",{staticClass:"replyButton",attrs:{slot:"content",theme:"safe",size:"normal",validateGroup:"ticketReply"},on:{click:t.postReply},slot:"content"},[n("translate",[t._v("Post Reply")])],1)],1),t._v(" "),n("ui-base-table",{attrs:{columns:["avatar","message"]}},t._l(t.messages,function(e){return n("ui-table-row",{key:e.message},[n("ui-round-badge",{staticClass:"messageAvatar",attrs:{slot:"col:avatar",theme:t.$state.app.user.name===e.from?"safe":"primary",size:48},slot:"col:avatar"},[t._v("\n                    "+t._s(t._f("firstLetter")(e.from))+"\n                ")]),t._v(" "),n("ui-grid",{attrs:{slot:"col:message",column:""},slot:"col:message"},[n("ui-grid",{attrs:{cross:"center"}},[n("span",{staticClass:"userName"},[t._v("\n                            "+t._s({admin:t.$gettext("Admin"),reseller:t.$gettext("Reseller"),user:t.$gettext("User")}[e.level])+":\n                            "+t._s(e.name)+"\n                        ")]),t._v(" "),n("span",{staticClass:"c:txt:neutral"},[t._v("\n                            ("+t._s(e.time)+")\n                        ")])]),t._v(" "),n("p",{domProps:{innerHTML:t._s(e.message)}})],1)],1)}))],1)],1)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},1981:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"MESSAGE_SYSTEM_OPTIONS_DIALOG",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Options")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:"",group:"messageOptions",validators:{regex:t.regexps.email}}},[n("ui-input-group",{attrs:{slot:"content"},slot:"content"},[n("ui-button",{attrs:{slot:"additions:left"},on:{click:function(e){t.send=!t.send}},slot:"additions:left"},[n("input-checkbox",{model:{value:t.send,callback:function(e){t.send=e},expression:"send"}},[n("translate",[t._v("E-mail a copy of all messages to")])],1)],1),t._v(" "),n("input-text",{attrs:{slot:"input"},slot:"input",model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),n("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[t._v("Should be valid email")])],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("ui-input-group",{attrs:{slot:"content"},slot:"content"},[n("ui-button",{attrs:{slot:"additions:left"},on:{click:function(e){t.days.tickets="0"===t.days.tickets?"":"0"}},slot:"additions:left"},[n("input-checkbox",{attrs:{model:"0"!=t.days.tickets}},[n("translate",[t._v("Automatically delete tickets older than")])],1)],1),t._v(" "),n("input-text",{attrs:{slot:"input",number:"",disabled:"0"===t.days.tickets},slot:"input",model:{value:t.days.tickets,callback:function(e){t.$set(t.days,"tickets",e)},expression:"days.tickets"}}),t._v(" "),n("ui-button",{attrs:{slot:"additions:right"},slot:"additions:right"},[n("translate",[t._v("days")])],1)],1)],1),t._v(" "),n("ui-form-element",[n("ui-input-group",{attrs:{slot:"content"},slot:"content"},[n("ui-button",{attrs:{slot:"additions:left"},on:{click:function(e){t.days.messages="0"===t.days.messages?"":"0"}},slot:"additions:left"},[n("input-checkbox",{attrs:{model:"0"!=t.days.messages}},[n("translate",[t._v("Automatically delete messages older than")])],1)],1),t._v(" "),n("input-text",{attrs:{slot:"input",number:"",disabled:"0"===t.days.messages},slot:"input",model:{value:t.days.messages,callback:function(e){t.$set(t.days,"messages",e)},expression:"days.messages"}}),t._v(" "),n("ui-button",{attrs:{slot:"additions:right"},slot:"additions:right"},[n("translate",[t._v("days")])],1)],1)],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",validateGroup:"messageOptions",theme:"primary"},on:{click:t.save},slot:"buttons"},[n("translate",[t._v("Save")])],1)],2)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},1983:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"CLEAR_MESSAGE_SYSTEM_DIALOG",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Clear Message System")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{group:"clearMessages",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Subject Contains")]),t._v(" "),n("input-autocomplete",{attrs:{slot:"content",values:t.subjects},slot:"content",model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1),t._v(" "),n("ui-form-element",{attrs:{group:"clearMessages",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("When")]),t._v(" "),"all"===t.when?n("input-usual-select",{attrs:{slot:"content",options:t.periods,novalidate:""},slot:"content",model:{value:t.when,callback:function(e){t.when=e},expression:"when"}}):n("ui-input-group",{attrs:{slot:"content"},slot:"content"},[n("input-usual-select",{attrs:{slot:"additions:left",options:t.periods},slot:"additions:left",model:{value:t.when,callback:function(e){t.when=e},expression:"when"}}),t._v(" "),n("input-text",{attrs:{slot:"input",number:""},slot:"input",model:{value:t.days,callback:function(e){t.days=e},expression:"days"}}),t._v(" "),n("ui-button",{attrs:{slot:"additions:right",disabled:""},slot:"additions:right"},[n("translate",{attrs:{"translate-n":Number(t.days)||1,"translate-plural":"days"}},[t._v("\n                        day\n                    ")])],1)],1)],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"danger",validateGroup:"clearMessages"},on:{click:t.clearMessageSystem},slot:"buttons"},[n("translate",[t._v("Clear")])],1)],2)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},1985:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"VIEW_MESSAGE_DIALOG",size:"normal"},on:{"dialog:close":function(e){t.$emit("close")}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Message")]),t._v(" "),n("header",{directives:[{name:"flex",rawName:"v-flex",value:{main:"between",cross:"baseline",wrap:!0},expression:"{ main: 'between', cross:'baseline', wrap: true }"},{name:"gutter",rawName:"v-gutter",value:[1,2],expression:"[1, 2]"}],attrs:{slot:"content:header"},slot:"content:header"},[n("h2",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}]},[t._v(t._s(t.subject))]),t._v(" "),n("time",[t._v(t._s(t._f("date")(t.time)))])]),t._v(" "),n("ui-code-area",{attrs:{slot:"content",content:t.content,breakLines:""},slot:"content"})],1)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2083:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",[n("ui-api-table",t._b({on:{"action:del":function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:t._u([{key:"col:subject",fn:function(e){var s=e.id,a=e.new,r=e.subject;return n("ui-link",{attrs:{name:"user/messages",query:{id:s}}},[a?[n("ui-round-badge",{attrs:{theme:"safe",size:6}}),t._v(" "),n("strong",{domProps:{innerHTML:t._s(r)}})]:n("span",{domProps:{innerHTML:t._s(r)}})],2)}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{endpoint:"GET_MESSAGES",rowID:"id",columns:{subject:t.$gettext("Subject"),last_message:{label:t.$gettext("Date"),filter:"date"}},actions:{del:t.$gettext("Delete")},updateOn:["DELETE_MESSAGES","CLEAR_MESSAGE_SYSTEM","GET_MESSAGE"],initialSort:{key:"last_message",order:"DESC"}},!1))],1),t._v(" "),t.$state.api.GET_USER_TICKETS.response.rowsCount?n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Tickets")]),t._v(" "),n("tickets-table")],1):t._e(),t._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(e){t.$dialog("CLEAR_MESSAGE_SYSTEM_DIALOG").open()}},slot:"bottom:links"},[n("translate",[t._v("Clear Message System")])],1),t._v(" "),n("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(e){t.$dialog("MESSAGE_SYSTEM_OPTIONS_DIALOG").open()}},slot:"bottom:links"},[n("translate",[t._v("Options")])],1),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("message","messages",t.select.length)},on:{"click:confirm":t.deleteMessages}}),t._v(" "),n("view-message-dialog",{on:{close:function(e){t.$router.push({name:"user/messages"})}}}),t._v(" "),n("view-ticket-dialog"),t._v(" "),n("clear-message-system-dialog"),t._v(" "),n("message-system-options-dialog")],1)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2198:function(t,e){},2199:function(t,e,n){"use strict";n.r(e);var s=n(1977),a=n(1333);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);e.default=i.exports},2200:function(t,e,n){(t.exports=n(6)(!0)).push([t.i,"#VIEW_TICKET_DIALOG .replyButton{position:absolute;right:1.5rem;bottom:1.5rem;z-index:2}#VIEW_TICKET_DIALOG textarea{resize:none}#VIEW_TICKET_DIALOG .col\\:avatar{width:1%;white-space:nowrap}#VIEW_TICKET_DIALOG .col\\:avatar .messageAvatar{color:#fff;font-size:1.6rem;font-weight:700}#VIEW_TICKET_DIALOG .col\\:message .userName{font-weight:600;font-size:1.4rem}","",{version:3,sources:["/usr/local/directadmin/data/skins/evolution/src/js/pages/user/messages/_dialogs/view-ticket-dialog.vue"],names:[],mappings:"AAqFA,iCAEQ,kBACA,aACA,cACA,SAAU,CALlB,6BAQQ,WAAY,CARpB,iCAWQ,SACA,kBAAmB,CAZ3B,gDAcY,WACA,iBACA,eAAgB,CAhB5B,4CAqBY,gBACA,gBAAiB,CACpB",file:"view-ticket-dialog.vue?vue&type=style&index=0&lang=scss",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#VIEW_TICKET_DIALOG {\n    .replyButton {\n        position: absolute;\n        right: 1.5rem;\n        bottom: 1.5rem;\n        z-index: 2;\n    }\n    textarea { \n        resize: none;\n    }\n    .col\\:avatar {\n        width: 1%;\n        white-space: nowrap;\n        .messageAvatar {\n            color: #FFF;\n            font-size: 1.6rem;\n            font-weight: 700;\n        }\n    }\n    .col\\:message {\n        .userName {\n            font-weight: 600;\n            font-size: 1.4rem;\n        }\n    }\n}\n\n"],sourceRoot:""}])},2201:function(t,e,n){"use strict";var s=n(1334);n.n(s).a},2202:function(t,e,n){"use strict";n.r(e);var s=n(1979),a=n(1336);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n(2201);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);e.default=i.exports},2203:function(t,e,n){"use strict";n.r(e);var s=n(1981),a=n(1338);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);e.default=i.exports},2204:function(t,e,n){"use strict";n.r(e);var s=n(1983),a=n(1340);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);e.default=i.exports},2205:function(t,e,n){"use strict";n.r(e);var s=n(1985),a=n(1342);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var o=n(0),i=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);e.default=i.exports}}]);