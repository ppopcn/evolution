(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1151:function(t,e,n){"use strict";n.r(e);var s=n(2026),a=n(1648);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var o=n(0),r=n(2417),u=n.n(r),l=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof u.a&&u()(l),e.default=l.exports},1645:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(8)),a=r(n(7)),i=r(n(3)),o=n(13);function r(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{domain:"",ns1:{name:"ns1",ip:""},ns2:{name:"ns2",ip:""},virtual:!1}},computed:(0,i.default)({},(0,o.mapResponse)({GET_NAME_SERVERS:"apiData"}),{domains:function(){return this.apiData.domains},ips:function(){return this.apiData.ips.map(function(t){return t.ip})},select:function(){return[this.ns1.ip,this.ns2.ip]},suffix:function(){return this.domain?"."+this.domain:""},requestData:function(){return{domain:this.domain,select:this.select,ns1:this.ns1.name,ns2:this.ns2.name,virtual:this.virtual}}}),methods:{create:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("CREATE_NAMESERVERS",t.requestData);case 2:t.$request("GET_NAME_SERVERS"),t.$emit("create");case 4:case"end":return e.stop()}},e,t)}))()}}}},1646:function(t,e,n){"use strict";n.r(e);var s=n(1645),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);e.default=a.a},1647:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=u(n(8)),a=u(n(7)),i=u(n(3)),o=n(13),r=u(n(2418));function u(t){return t&&t.__esModule?t:{default:t}}e.default=(0,i.default)({},(0,o.preload)("GET_NAME_SERVERS"),{components:{CreateNameserversDialog:r.default},data:function(){return{ns1:"",ns2:"",checkedRows:[]}},computed:(0,i.default)({},(0,o.mapResponse)({GET_NAME_SERVERS:["ips","domains","nameservers","defaultDomain"]}),{checkedIPs:function(){return this.checkedRows.map(function(t){return t.ip})},canDelete:function(){var t=this;if(2!==this.checkedRows.length||this.checkedRows.some(function(t){return!t.ns}))return!1;var e=this.domains.find(function(e){return t.checkedRows[0].ns.includes(e)});return this.checkedRows[1].ns.includes(e)},actions:function(){return{create:this.ips.filter(function(t){return!t.ns}).length>=2,delete:this.canDelete}}}),created:function(){this.ns1=this.$p6e.toU(this.nameservers.ns1),this.ns2=this.$p6e.toU(this.nameservers.ns2)},methods:{reloadRows:function(){this.$request("GET_NAME_SERVERS"),this.checkedRows=[]},updateDefaults:function(){this.$actionRequest("SET_DEFAULT_NAMESERVERS",{ns1:this.$p6e.toA(this.ns1),ns2:this.$p6e.toA(this.ns2)})},deleteNameservers:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("DELETE_NAMESERVERS",{select:t.checkedIPs});case 2:e.sent&&t.reloadRows();case 4:case"end":return e.stop()}},e,t)}))()}}})},1648:function(t,e,n){"use strict";n.r(e);var s=n(1647),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);e.default=a.a},1968:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"CREATE_NAMESERVERS_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Create Nameservers")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Domain:")]),t._v(" "),n("input-usual-select",{attrs:{slot:"content",options:t.domains},slot:"content",model:{value:t.domain,callback:function(e){t.domain=e},expression:"domain"}})],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.domain?n("div",[n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Nameserver 1:")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:t.suffix},slot:"content",model:{value:t.ns1.name,callback:function(e){t.$set(t.ns1,"name",e)},expression:"ns1.name"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-usual-select",{attrs:{slot:"content",options:t.ips},slot:"content",model:{value:t.ns1.ip,callback:function(e){t.$set(t.ns1,"ip",e)},expression:"ns1.ip"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Nameserver 2:")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:t.suffix},slot:"content",model:{value:t.ns2.name,callback:function(e){t.$set(t.ns2,"name",e)},expression:"ns2.name"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-usual-select",{attrs:{slot:"content",options:t.ips},slot:"content",model:{value:t.ns2.ip,callback:function(e){t.$set(t.ns2,"ip",e)},expression:"ns2.ip"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-check",{attrs:{slot:"content"},slot:"content",model:{value:t.virtual,callback:function(e){t.virtual=e},expression:"virtual"}},[n("translate",[t._v("Virtual")])],1)],1)],1):t._e()])],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.create},slot:"buttons"},[n("translate",[t._v("Create Nameservers")])],1)],2)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2026:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[t.actions.create?n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("CREATE_NAMESERVERS_DIALOG").open()}},slot:"header:buttons"},[n("translate",[t._v("Create Nameservers")])],1):t._e(),t._v(" "),n("app-page-section",[n("ui-table",{attrs:{columns:[{id:"ip",label:t.$gettext("IP")},{id:"status",label:t.$gettext("Status")},{id:"value",label:t.$gettext("User(s)")},{id:"ns",label:t.$gettext("Nameserver")}],rows:t.ips,checkedRows:t.checkedRows,disablePagination:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:ns",fn:function(e){var n=e.ns;return[t._v("\n                "+t._s(t._f("p6e-unicode")(n))+"\n            ")]}}])},[n("ui-table-action",{attrs:{slot:"table:actions",disabled:!t.actions.delete},on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}},slot:"table:actions"},[n("translate",[t._v("Delete")])],1)],1)],1),t._v(" "),n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Set the Nameservers that will be assigned to new users")]),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Name Server 1")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.ns1,callback:function(e){t.ns1=e},expression:"ns1"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Name Server 2")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.ns2,callback:function(e){t.ns2=e},expression:"ns2"}})],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:t.updateDefaults},slot:"footer:buttons"},[n("translate",[t._v("Save")])],1),t._v(" "),n("create-nameservers-dialog",{on:{create:function(e){t.checkedRows=[]}}}),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$gettext("nameserver")},on:{"click:confirm":t.deleteNameservers}})],1)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2417:function(t,e){},2418:function(t,e,n){"use strict";n.r(e);var s=n(1968),a=n(1646);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var o=n(0),r=Object(o.a)(a.default,s.a,s.b,!1,null,null,null);e.default=r.exports}}]);