(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1110:function(t,e,n){"use strict";n.r(e);var s=n(2052),a=n(1446);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var r=n(0),o=n(2280),l=n.n(o),u=Object(r.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof l.a&&l()(u),e.default=u.exports},1445:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8)),a=o(n(7)),i=o(n(3)),r=n(13);function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,i.default)({},(0,r.preload)("GET_EMAIL_MAILING_LISTS"),{data:function(){return{listName:"",purgeDays:"90",checkedRows:[]}},computed:(0,i.default)({},(0,r.mapResponse)({GET_EMAIL_MAILING_LISTS:"rows"}),{checkedLists:function(){return this.checkedRows.map(function(t){return t.list})}}),watch:{$domain:function(){this.reloadRows()}},methods:{reloadRows:function(){this.$request("GET_EMAIL_MAILING_LISTS")},createList:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("CREATE_EMAIL_MAILING_LIST",{name:t.listName},{reset:!0});case 2:e.sent&&(t.checkedRows=[],t.reloadRows());case 4:case"end":return e.stop()}},e,t)}))()},purgeArchives:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("PURGE_EMAIL_MAILING_LIST_ARCHIVES",{select:t.checkedLists,purge_days:t.purgeDays});case 2:e.sent&&(t.checkedRows=[],t.reloadRows());case 4:case"end":return e.stop()}},e,t)}))()},deleteLists:function(){var t=this;return(0,a.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("DELETE_MAILING_LISTS",{select:t.checkedLists});case 2:e.sent&&(t.checkedRows=[],t.reloadRows());case 4:case"end":return e.stop()}},e,t)}))()}}})},1446:function(t,e,n){"use strict";n.r(e);var s=n(1445),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);e.default=a.a},2052:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("CREATE_LIST_DIALOG").open()}},slot:"header:buttons"},[n("translate",[t._v("Create Mailing List")])],1),t._v(" "),n("app-page-section",[n("ui-table",t._b({attrs:{disablePagination:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:list",fn:function(e){var s=e.list;return[n("ui-link",{attrs:{name:"user/email/lists/view",params:{name:s}}},[t._v("\n                    "+t._s(s)+"@"+t._s(t.$domainUnicode)+"\n                ")])]}},{key:"col:archive_size",fn:function(e){var n=e.archive_size;return[t._v("\n                "+t._s(t._f("humanReadableSize")(n))+"\n            ")]}},{key:"col:inline-actions",fn:function(e){var s=e.item;return[n("ui-button-link",{attrs:{icon:"pencil",title:t.$gettext("Edit"),name:"user/email/lists/modify",params:{name:s.list}}})]}}])},"ui-table",{rows:t.rows,columns:[{id:"list",label:t.$gettext("Mailing List")},{id:"subscribers",label:t.$gettext("Subscribers")},{id:"digest_subscribers",label:t.$gettext("Digest Subscribers")},{id:"archive_size",label:t.$gettext("Archive Size")},{id:"inline-actions"}],checkedRows:t.checkedRows},!1),[n("template",{slot:"table:actions"},[n("ui-table-action",{on:{click:function(e){t.$dialog("PURGE_ARCHIVES_DIALOG").open()}}},[n("translate",[t._v("Purge Archives")])],1),t._v(" "),n("ui-table-action",{on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[t._v("Delete")])],1)],1)],2)],1),t._v(" "),n("ui-dialog",{attrs:{id:"CREATE_LIST_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Create Mailing List")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:"",group:"mailingList",validators:{required:!0}},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                List Name:\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:"@"+t.$domainUnicode},slot:"content",model:{value:t.listName,callback:function(e){t.listName=e},expression:"listName"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"mailingList"},on:{click:t.createList},slot:"buttons"},[n("translate",[t._v("Create")])],1)],1),t._v(" "),n("ui-dialog",{attrs:{id:"PURGE_ARCHIVES_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Purge Archives")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content"},slot:"content"},[n("template",{slot:"content"},[n("translate",[t._v("\n                    Purge Archives older than\n                ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.purgeDays,expression:"purgeDays"}],attrs:{type:"text",size:"2"},domProps:{value:t.purgeDays},on:{input:function(e){e.target.composing||(t.purgeDays=e.target.value)}}}),t._v(" "),n("translate",[t._v("\n                    days.\n                ")])],1)],2),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:t.purgeArchives},slot:"buttons"},[n("translate",[t._v("Purge")])],1)],1),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("mailing list","mailing lists",t.checkedRows.length)},on:{"click:confirm":t.deleteLists}})],1)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2280:function(t,e){}}]);