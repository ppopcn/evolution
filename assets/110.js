(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{1170:function(e,t,n){"use strict";n.r(t);var s=n(2111),r=n(1745);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);var i=n(0),u=n(2496),o=n.n(u),l=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);"function"==typeof o.a&&o()(l),t.default=l.exports},1214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{priority:"20",subject:"",message:"",emailOnly:!1}},props:{users:{type:Array,required:!1}},computed:{priorityOptions:function(){return{10:this.$gettext("Low"),20:this.$gettext("Middle"),30:this.$gettext("High")}}},methods:{sendMessage:function(){this.$actionRequest("SEND_MESSAGE_TO_MULTIPLE_USERS",{users:this.users,priority:this.priority.value,subject:this.subject,message:this.message,emailOnly:this.emailOnly})}}}},1215:function(e,t,n){"use strict";n.r(t);var s=n(1214),r=n.n(s);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);t.default=r.a},1225:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"CREATE_MESSAGE_DIALOG",size:"normal"},on:{"dialog:close":e.$reset}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Send a Message")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("To:")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-grid",{attrs:{wrap:""}},e._l(e.users,function(t){return n("ui-badge",{key:t,attrs:{theme:"neutral",size:"big",icon:"person"}},[e._v("\n                        "+e._s(t)+"\n                    ")])}))],1)],1),e._v(" "),n("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Priority:")]),e._v(" "),n("input-usual-select",{attrs:{slot:"content",options:e.priorityOptions},slot:"content",model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Subject:")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Message:")]),e._v(" "),n("input-textarea",{attrs:{slot:"content",rows:"10"},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),n("ui-form-element",[n("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),n("input-check",{attrs:{slot:"content"},slot:"content",model:{value:e.emailOnly,callback:function(t){e.emailOnly=t},expression:"emailOnly"}},[n("translate",[e._v("E-mail Only")])],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"message"},on:{click:e.sendMessage},slot:"buttons"},[e._v("\n        Send Message\n    ")])],2)},r=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return r})},1243:function(e,t,n){"use strict";n.r(t);var s=n(1225),r=n(1215);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);var i=n(0),u=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);t.default=u.exports},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(8)),r=l(n(7)),a=l(n(10)),i=l(n(3)),u=n(13),o=l(n(1243));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)({},(0,u.preload)("GET_ALL_USERS"),{components:{CreateMessageDialog:o.default},data:function(){return{select:[],leaveDNS:!1,message:"",userStatus:{}}},computed:(0,i.default)({},(0,u.mapResponse)({GET_ALL_USERS:["rows","options"]}),{showRemoteServer:function(){return!!(0,a.default)(this.options.remote_servers||{}).length}}),mounted:function(){this.options.connectionError&&this.$notifications.error({timeout:1/0,title:this.$gettext("Connection Error"),content:this.options.connectionError})},methods:{getUsageProgress:function(e){var t=100*e.usage/e.limit,n="primary";return t>40&&(n="safe"),t>80&&(n="danger"),{size:"normal",theme:n,value:t}},deleteUsers:function(){var e=this;return(0,r.default)(s.default.mark(function t(){var n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.select).forEach(function(t){e.userStatus[t]="deleted"}),t.next=4,e.$actionRequest("DELETE_USERS",{select:n,location:"CMD_ALL_USER_SHOW",leave_dns:e.options.add_leave_dns?e.leaveDNS:void 0});case 4:t.sent||(n.forEach(function(t){delete e.userStatus[t]}),e.$request("GET_ALL_USERS"));case 6:case"end":return t.stop()}},t,e)}))()},getChildUsers:function(e){return this.$state.api.GET_ALL_USERS.response.users.rows.filter(function(t){return t.creator===e}).map(function(e){return e.username})},setStatus:function(e,t){this.userStatus[e]=t},suspendUsers:function(){var e=this;return(0,r.default)(s.default.mark(function t(){var n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.select).forEach(function(t){e.userStatus[t]="suspended",e.getChildUsers(t).forEach(function(t){e.userStatus[t]="suspended"})}),t.next=4,e.$actionRequest("SUSPEND_USERS",{select:n,reason:"Other",location:"CMD_ALL_USER_SHOW"});case 4:t.sent||n.forEach(function(t){delete e.userStatus[t],e.getChildUsers(t).forEach(function(t){delete e.userStatus[t]})});case 6:case"end":return t.stop()}},t,e)}))()},unsuspendUsers:function(){var e=this;return(0,r.default)(s.default.mark(function t(){var n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.select).forEach(function(t){e.userStatus[t]="active",e.getChildUsers(t).forEach(function(t){e.userStatus[t]="active"})}),t.next=4,e.$actionRequest("UNSUSPEND_USERS",{select:n,location:"CMD_ALL_USER_SHOW"});case 4:t.sent||n.forEach(function(t){delete e.userStatus[t],e.getChildUsers(t).forEach(function(t){delete e.userStatus[t]})});case 6:case"end":return t.stop()}},t,e)}))()},filterDeletedUsers:function(e){return"deleted"!==this.userStatus[e.username]},mapUserStatus:function(e){return(0,i.default)({},e,{suspended:this.userStatus[e.username]?{value:"suspended"===this.userStatus[e.username]}:e.suspended})}}})},1745:function(e,t,n){"use strict";n.r(t);var s=n(1744),r=n.n(s);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);t.default=r.a},2111:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",[n("ui-api-table",e._b({on:{"action:message":function(t){e.$dialog("CREATE_MESSAGE_DIALOG").open()},"action:suspend":e.suspendUsers,"action:unsuspend":e.unsuspendUsers,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:username",fn:function(t){var s=t.username,r=t.suspended,a=t.deleted,i=t.remote_server,u=t.is_user;return n("div",{staticClass:"wrap:nowrap"},[n("ui-link",i?{attrs:{href:e.options.remote_servers[i]+"/CMD_SHOW_USER="+s,target:"_blank"}}:{attrs:{name:u?"reseller/users/view":"admin/users/resellers/view",params:{user:s}}},[e._v("\n                    "+e._s(s)+"\n                ")]),e._v(" "),r.value?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Suspended")])],1):e._e(),e._v(" "),a?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Deleted")])],1):e._e()],1)}},{key:"col:creator",fn:function(t){var s=t.creator;return["root"!==s?n("ui-link",{attrs:{name:"admin/users/resellers/view",params:{user:s}}},[e._v("\n                    "+e._s(s)+"\n                ")]):e._e()]}},{key:"col:bandwidth",fn:function(t){var s=t.bandwidth;return[s.limit!==1/0?n("ui-progress",e._b({directives:[{name:"margin",rawName:"v-margin",value:[.5,null],expression:"[.5, null]"}]},"ui-progress",e.getUsageProgress(s),!1)):e._e(),e._v("\n                "+e._s(e._f("humanReadableSize")(s.usage))+"\n                /\n                "),s.limit!==1/0?[e._v("\n                    "+e._s(e._f("humanReadableSize")(s.limit))+"\n                ")]:[e._v("∞")]]}},{key:"col:quota",fn:function(t){var s=t.quota;return[s.limit!==1/0?n("ui-progress",e._b({directives:[{name:"margin",rawName:"v-margin",value:[.5,null],expression:"[.5, null]"}]},"ui-progress",e.getUsageProgress(s),!1)):e._e(),e._v("\n                "+e._s(e._f("humanReadableSize")(s.usage))+"\n                /\n                "),s.limit!==1/0?[e._v("\n                    "+e._s(e._f("humanReadableSize")(s.limit))+"\n                ")]:[e._v("∞")]]}},{key:"col:vdomains",fn:function(t){var n=t.vdomains;return[e._v("\n                "+e._s(n.usage)+"\n                /\n                "),n.limit!==1/0?[e._v("\n                    "+e._s(n.limit)+"\n                ")]:[e._v("∞")]]}},{key:"col:ip",fn:function(t){var s=t.ip;return e._l(s,function(t){return n("p",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}]},[e._v(e._s(t))])})}},{key:"col:domains",fn:function(t){var s=t.item;return e._l(Object.keys(s.domains||{}),function(t){return n("div",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}]},[n("a",{attrs:{href:"//"+t}},[e._v(e._s(e._f("p6e-unicode")(t)))]),e._v(" "),e._l(s.domains[t],function(t){return n("div",{directives:[{name:"margin",rawName:"v-margin",value:[,,,1],expression:"[,,,1]"}]},[n("b",[e._v("P: ")]),e._v(" "),n("a",{attrs:{href:"//"+t}},[e._v(e._s(e._f("p6e-unicode")(t)))]),e._v(" "),n("br")])})],2)})}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{endpoint:"GET_ALL_USERS",property:"users",rowID:"username",columns:{username:e.$gettext("Username"),creator:e.$gettext("Creator"),bandwidth:{label:e.$gettext("Bandwidth"),width:"25%"},quota:{label:e.$gettext("Disk Usage"),width:"25%"},vdomains:{label:e.$gettext("# of domains"),width:"12%"},domains:e.$gettext("Domain(s)"),ip:e.$gettext("IP(s)"),sent_emails:e.$gettext("Sent E-mails"),remote_server:{label:e.$gettext("Remote Server"),hide:!e.showRemoteServer}},actions:{message:e.$gettext("Send a Message"),suspend:e.$gettext("Suspend"),unsuspend:e.$gettext("Unsuspend"),del:e.$gettext("Delete")},updateOn:["SUSPEND_USERS","UNSUSPEND_USERS","DELETE_USERS"],rowsMapper:e.mapUserStatus,rowsFilter:e.filterDeletedUsers},!1))],1),e._v(" "),n("create-message-dialog",{attrs:{users:e.select}}),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("user","users",e.select.length)},on:{"click:confirm":e.deleteUsers}})],1)},r=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return r})},2496:function(e,t){}}]);