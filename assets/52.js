(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1112:function(e,t,n){"use strict";n.r(t);var a=n(2050),i=n(1456);for(var l in i)"default"!==l&&function(e){n.d(t,e,function(){return i[e]})}(l);var s=n(0),r=n(2288),o=n.n(r),c=Object(s.a)(i.default,a.a,a.b,!1,null,null,null);"function"==typeof o.a&&o()(c),t.default=c.exports},1455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(8)),i=r(n(7)),l=r(n(3)),s=n(13);function r(e){return e&&e.__esModule?e:{default:e}}t.default=(0,l.default)({},(0,s.preload)("GET_EMAIL_FILTERS"),{data:function(){return{add:{type:"email",value:""},adult:!1,action:"drop",checkedRows:[]}},computed:(0,l.default)({},(0,s.mapResponse)({GET_EMAIL_FILTERS:"filters"}),{checkedFilters:function(){var e=this;return this.checkedRows.map(function(t){return e.filters.rows.indexOf(t)})}}),created:function(){var e=this;this.adult=this.filters.options.adult,this.action=this.filters.options.action,this.$watch("adult",this.updateAdult),this.$watch("action",this.updateAction),this.$watch("add.type",function(){e.add.value=""})},watch:{$domain:function(){this.reloadFilters()}},methods:{reloadFilters:function(){this.$request("GET_EMAIL_FILTERS"),this.checkedRows=[]},updateAdult:function(){this.$actionRequest("SET_EMAIL_FILTER_ADULT_OPTION",{enabled:this.adult})},updateAction:function(){this.$actionRequest("SET_EMAIL_FILTER_ACTION_OPTION",{value:this.action})},addFilter:function(){var e=this;return(0,i.default)(a.default.mark(function t(){var n,i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(n=e.add.value).toString(),"email"===e.add.type?n=e.$p6e.email2ascii(n):"size"===e.add.type&&(n+="B"),t.next=5,e.$actionRequest("CREATE_EMAIL_FILTER",{type:e.add.type,value:n},{reset:!0});case 5:if(!t.sent){t.next=13;break}if("size"!==e.add.type){t.next=12;break}if(!(i=e.filters.rows.filter(function(e){return"size"===e.type})).length){t.next=12;break}return t.next=12,e.$request("DELETE_EMAIL_FILTERS",{select:i.map(function(t){return e.filters.rows.indexOf(t)})});case 12:e.reloadFilters();case 13:case"end":return t.stop()}},t,e)}))()},deleteFilters:function(){var e=this;return(0,i.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("DELETE_EMAIL_FILTERS",{select:e.checkedFilters});case 2:t.sent&&(e.checkedRows=[],e.reloadFilters());case 4:case"end":return t.stop()}},t,e)}))()}}})},1456:function(e,t,n){"use strict";n.r(t);var a=n(1455),i=n.n(a);for(var l in a)"default"!==l&&function(e){n.d(t,e,function(){return a[e]})}(l);t.default=i.a},2050:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",[n("ui-table",e._b({attrs:{checkedRows:e.checkedRows},on:{"update:checkedRows":function(t){e.checkedRows=t}},scopedSlots:e._u([{key:"col:type",fn:function(t){var a=t.type;return[n("translate","email"===a?[e._v("\n                    E-mail\n                ")]:"domain"===a?[e._v("\n                    Domain\n                ")]:"word"===a?[e._v("\n                    Stop word\n                ")]:[e._v("\n                    Size\n                ")])]}},{key:"col:value",fn:function(t){var n=t.value,a=t.item;return["size"===a.type?[e._v("\n                    "+e._s(e._f("humanReadableSize")(n))+"\n                ")]:"email"===a.type?[e._v("\n                    "+e._s(e._f("p6e-unicode-email")(n))+"\n                ")]:[e._v("\n                    "+e._s(n)+"\n                ")]]}}])},"ui-table",{rows:e.filters.rows,columns:[{id:"type",label:e.$gettext("Block By"),width:"200px"},{id:"value",label:e.$gettext("Value")}],rowsCount:e.filters.rows.length,isCheckable:!0,isSortable:!1},!1),[n("template",{slot:"table:actions"},[n("ui-table-action",{on:{click:function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[e._v("Delete")])],1)],1),e._v(" "),n("template",{slot:"row:new"},[n("tr",[n("td"),e._v(" "),n("td",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:"{ cross: 'center', main:'between' }"}]},[n("input-usual-select",{attrs:{options:{email:e.$gettext("E-mail"),domain:e.$gettext("Domain"),word:e.$gettext("Stop word"),size:e.$gettext("Size")}},model:{value:e.add.type,callback:function(t){e.$set(e.add,"type",t)},expression:"add.type"}}),e._v(" "),n("ui-tooltip",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}]},["email"===e.add.type?n("translate",[e._v("\n                                    Block a specific E-mail address\n                                ")]):"domain"===e.add.type?n("translate",[e._v("\n                                    Block mail from an entire domain\n                                ")]):"word"===e.add.type?n("translate",[e._v("\n                                    Block all e-mails containing stop words\n                                ")]):n("translate",[e._v("\n                                    Block all e-mails larger than (KB)\n                                ")])],1)],1)]),e._v(" "),n("td",["size"===e.add.type?n("input-size",{attrs:{units:"KB"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addFilter(t):null}},model:{value:e.add.value,callback:function(t){e.$set(e.add,"value",t)},expression:"add.value"}}):n("input-text",{on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addFilter(t):null}},model:{value:e.add.value,callback:function(t){e.$set(e.add,"value",t)},expression:"add.value"}}),e._v(" "),n("ui-button",{attrs:{theme:"danger",size:"normal",disabled:!e.add.value},on:{click:e.addFilter}},[n("translate",[e._v("Block")])],1)],1)])])],2)],1),e._v(" "),n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("Options")]),e._v(" "),n("ui-form-element",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],attrs:{slot:"title"},slot:"title"},[n("translate",[e._v("Adult Filter:")]),e._v(" "),n("ui-tooltip",[e._v("\n                    Blocks out common adult phrases, words, and addresses\n                ")])],1),e._v(" "),n("input-check",{attrs:{slot:"content"},slot:"content",model:{value:e.adult,callback:function(t){e.adult=t},expression:"adult"}},[e.adult?n("translate",[e._v("Enabled")]):n("translate",[e._v("Disabled")])],1)],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Action for filter matches:\n            ")]),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}],attrs:{slot:"content"},slot:"content"},[n("input-check",{attrs:{type:"radio",value:"drop"},model:{value:e.action,callback:function(t){e.action=t},expression:"action"}},[n("translate",[e._v("Drop E-mail")])],1),e._v(" "),n("input-check",{directives:[{name:"margin",rawName:"v-margin",value:[,,,"5px"],expression:"[,,,'5px']"}],attrs:{type:"radio",value:"email"},model:{value:e.action,callback:function(t){e.action=t},expression:"action"}},[n("translate",[e._v("Send to spambox")])],1)],1)],1)],1),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("filter","filters",e.checkedRows.length)},on:{"click:confirm":e.deleteFilters}})],1)},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},2288:function(e,t){}}]);