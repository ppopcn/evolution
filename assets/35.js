(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1095:function(t,e,s){"use strict";s.r(e);var r=s(2072),o=s(1369);for(var n in o)"default"!==n&&function(t){s.d(e,t,function(){return o[t]})}(n);var a=s(0),i=s(2222),u=s.n(i),c=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);"function"==typeof u.a&&u()(c),e.default=c.exports},1368:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(s(8)),o=u(s(7)),n=u(s(3)),a=s(13),i=s(20);function u(t){return t&&t.__esModule?t:{default:t}}e.default=(0,n.default)({},(0,a.preload)("GET_FTP_ACCOUNTS"),{data:function(){return{username:"",password:"",type:"domain",customDir:""}},computed:(0,n.default)({},(0,i.mapState)({passwordError:function(t){return t.api.VALIDATE_PASSWORD.response.error},existingUsers:function(t){return t.api.GET_FTP_ACCOUNTS.response.map(function(t){return t.user})}}),(0,a.mapTokens)({ftpsep:"FTP_SEP"}),{ftpOptions:function(){return[{id:"domain",label:this.$gettext("Domain"),desc:this.$gettext("Ftp account with the root directory in the domains home directory (one up from the public_html)")},{id:"ftp",label:this.$gettext("Ftp"),desc:this.$gettext("Ftp account with the root directory in the domains public_ftp directory")},{id:"user",label:this.$gettext("User"),desc:this.$gettext("Ftp account with the root directory as the users name in the public_html directory")},{id:"custom",label:this.$gettext("Custom"),desc:this.$gettext("Please provide custom directory in the field below")}]}}),methods:{createFtpAccount:function(){var t=this;return(0,o.default)(r.default.mark(function e(){var s,o,n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("UPDATE_FTP_ACCOUNT",{domain:t.$domain,user:t.username,passwd:t.password,passwd2:t.password,type:t.type,custom_val:t.customDir},{suppressSuccessNotification:!0});case 2:e.sent&&(s=t.$gettext('\n                    <table class="table-elem">\n                        <tr><td>Login:</td><td>%{ login }</td></tr>\n                        <tr><td>Password:</td><td>%{ passwd }</td></tr>\n                        <tr><td>Path:</td><td>%{ path }</td></tr>\n                    </table>\n                '),o=t.$state.api.UPDATE_FTP_ACCOUNT.response,n={title:t.$gettext("FTP account created"),content:t.$gettextInterpolate(s,o),extended:!0},t.$notifications.success(n),a.emitter.emit("request:results",n),t.$router.push({name:"user/ftp-accounts"}));case 4:case"end":return e.stop()}},e,t)}))()},isUserExists:function(t){return!this.existingUsers.includes(t)},copyPassword:function(){var t=this,e=document.createElement("textarea");e.style.position="fixed",e.style.bottom=0,e.style.right=0,e.style.width="2em",e.style.height="2em",e.style.padding=0,e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=this.password,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")&&this.$nextTick(function(){t.$notifications.success({title:"Password copied!"}),document.body.removeChild(e)})}},watch:{type:function(t){"custom"!==t||this.customDir||(this.customDir="/home/"+this.username)}}})},1369:function(t,e,s){"use strict";s.r(e);var r=s(1368),o=s.n(r);for(var n in r)"default"!==n&&function(t){s.d(e,t,function(){return r[t]})}(n);e.default=o.a},2072:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("app-page",[s("ui-button",{attrs:{slot:"footer:buttons",theme:"safe",validateGroup:"createFtpAccount"},on:{click:t.createFtpAccount},slot:"footer:buttons"},[s("translate",[t._v("Create")])],1),t._v(" "),s("app-page-section",[s("ui-form-element",{attrs:{group:"createFtpAccount",validators:{required:!0,isUserExists:t.isUserExists,regex:/^[a-z0-9]+$/i}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("FTP Username")]),t._v(" "),s("input-text",{attrs:{slot:"content",suffix:""+t.ftpsep+t.$p6e.toU(t.$domain)},slot:"content",model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("translate",{attrs:{slot:"error:isUserExists"},slot:"error:isUserExists"},[t._v("\n                User already exists\n            ")]),t._v(" "),s("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[t._v("\n                Wrong username format\n            ")])],1),t._v(" "),s("ui-form-element",{attrs:{group:"createFtpAccount",validators:{required:!0,apiValidation:"VALIDATE_PASSWORD"}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Enter Password\n            ")]),t._v(" "),s("ui-input-group",{attrs:{slot:"content"},slot:"content"},[s("input-password",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],ref:"password",attrs:{slot:"input",showGenerator:""},slot:"input",model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),t.password?s("ui-button",{directives:[{name:"margin",rawName:"v-margin",value:[,,,"1rem"],expression:"[,,,'1rem']"}],attrs:{slot:"additions:right",theme:"light"},on:{click:t.copyPassword},slot:"additions:right"},[s("translate",[t._v("Copy Password")])],1):t._e()],1),t._v(" "),s("span",{attrs:{slot:"error:apiValidation"},domProps:{innerHTML:t._s(t.passwordError)},slot:"error:apiValidation"})],1),t._v(" "),s("ui-form-element",[s("template",{slot:"content"},[s("ui-tabs",{attrs:{radio:"",tabs:t.ftpOptions,selected:t.type},on:{"update:selected":function(e){t.type=e}}},[s("template",{slot:"tab:custom"},[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                                Directory\n                            ")]),t._v(" "),s("template",{slot:"content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.customDir,expression:"customDir"}],attrs:{type:"text"},domProps:{value:t.customDir},on:{input:function(e){e.target.composing||(t.customDir=e.target.value)}}})])],2)],1)],2)],1)],2)],1)],1)},o=[];s.d(e,"a",function(){return r}),s.d(e,"b",function(){return o})},2222:function(t,e){}}]);